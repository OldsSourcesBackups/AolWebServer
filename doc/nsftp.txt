
$Header$

The nsftp module
----------------

The nsftp module is a fully-functioning FTP server that uses the AS's
permission system and trace mechanism.  If anonymous logins are
permitted, users can browse and download from the website via FTP as
well.  The nsftp module supports most FTP commands.  The module also
has a logging system that tracks uploads and downloads using the
Xferlog format (the same one as wu-ftp) and records system commands.

The module is known to compile and work on linux (RedHat 6.0 dist) and
Solaris 2.6.


Optional TCP Wrappers
---------------------

The nsftp module has the tcp wrapper code ifdef'ed out, it can be
compiled into the module by performing the following:

1) Download tcp wrappers version 7.6. You can usually download a
distribution from the following site:

ftp://ftp.cert.org/pub/tools/tcp_wrappers

2) Place the libwrap.a under nsftp/wrappers/$(PLATFORM)/lib
and the tcpd.h under nsftp/wrappers/$(PLATFORM)/include

3) Uncomment the lines in the Makefile with -DUSE_WRAPPERS 
and MODULE_LIBS with -lwrap.

Note: You can try linking against your distributions libwrap.a  
and uncommenting the line (i.e., the "LIBS=-L/usr/lib -lwrap") in 
the nsftp makefile as well.


Building and installing nsftp
-----------------------------

Just type `gmake install` inside the nsftp directory.

Here are the configuration values

ns_section "ns/server/${servername}/module/nsftp"
ns_param   FtpPort         8021
ns_param   FtpHostname     $hostname
ns_param   FtpAddress      $address
ns_param   FtpAllowAnonymous  true
ns_param   FtpAllowChangeMode true
ns_param   FtpRunServerTraces on
ns_param   FtpSysLog       on
ns_param   FtpDebug        on
ns_param   FtpXferLog      on
# other allowed options shown in nsftp.h

ns_section "ns/server/${servername}/modules"
ns_param   nsperm          nsperm.so ;# nsperm.so must be loaded for nsftp
ns_param   nsftp           nsftp.so
